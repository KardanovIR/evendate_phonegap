<div class="navbar">
    <div class="navbar-inner blur">
        <div class="left sliding">
            <a href="#" class="link back">
                <i class="ion-ios-arrow-back"></i>
            </a>
        </div>
        <div class="center sliding heading-name">Событие</div>
        <div class="right"><span class="icon ion-ios-bell-outline event-bell" onclick="showNotificationsList()"></span>
        </div>
    </div>
</div>
<div class="pages">
    <div data-page="event" class="page event" ng-controller="EventPageController">
        <div class="page-content">
            <div class="event-viewport">
                <div class="event-wrapper">
                    <div class="content-block event-page-content-block">
                        <div class="background-img-wrapper" data-top="0">
                            <img ng-src="{{event.image_horizontal_url}}"
                                 class="background-img"
                                 onerror="onImgErrorPattern(this);">
                        </div>

                        <div class="text-center">
                            <a href="#" ng-click="event.toggleFavorite($event);"
                               ng-class="{'button-active':event.is_favorite}"
                               class="button button-round button-switch event-favorite-button">{{event.favorite_text}}</a>
                        </div>

                        <div class="content-block-inner without-top-border without-bottom-border event-page-content-block-inner">

                            <table class="event-attributes">
                                <tbody>
                                <tr ng-click="event.openOrganization();">
                                    <td class="event-organization-name" colspan="2"><img
                                            onerror="onImgErrorSmall(this);"
                                            ng-src="{{event.organization_logo_small_url}}"><span
                                            class="event-organization-title">{{event.organization_name}}</span></td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="event-page-title">{{event.title}}</td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr ng-hide="event.favored.length == 0">
                                    <td colspan="2" class="text-center">
                                        <div class="liked-users" ng-click="event.openLikedFriends()">
                                            <img class="user-avatar" ng-repeat="user in event.favored"
                                                 ng-src="{{user.avatar_url}}" onerror="onImgErrorSmall(this);">
                                            <div class="organization-subscribed-count">
                                                {{event.favored_users_count}}
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="event-block-separator" ng-hide="event.favored.length == 0">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="content-block-title">Описание</div><span class="event-description">{{event.description}}</span>
                                    </td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="ng-binding">
                                        <div class="content-block-title">Место</div>
                                        {{event.location}}
                                    </td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="ng-binding">
                                        <div class="content-block-title">Дата</div>
                                        <!--Every day and same time-->
                                        <div ng-show="event.short_dates != null">
                                            {{event.dates_text}}
                                        </div>
                                        <!--LessOrEqual 5 days, not every day or not same time-->
                                        <div ng-repeat="date in event.dates_text_obj" ng-show="event.short_dates == null && event.dates_text_obj.length <= 5">
                                            <span class="event-date">{{date}}</span>
                                        </div>
                                        <!--More, than 5 days, not every day or not same time-->
                                        <div class="accordion-item" ng-show="event.short_dates == null && event.dates_text_obj.length > 5">
                                            <p class="event-date" ng-repeat="date in event.dates_text_obj | limitTo:3">{{date}}</p>
                                            <div class="accordion-item-toggle organization-details"
                                                 ng-click="toggleDetails();" ng-show="event.dates.length > 2">Показать все ({{event.dates.length}})
                                                <span
                                                        class="icon"
                                                        ng-class="{'ion-ios-arrow-down':details_shown == false, 'ion-ios-arrow-up':details_shown}"></span>
                                            </div>
                                            <div class="accordion-item-content">
                                                <div ng-repeat="(index, date) in event.dates_text_obj">
                                                    <p class="event-date" ng-hide="index < 3">{{date}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="content-block-title">Регистрация</div>
                                        <span>{{event.registration_till_text}}</span>
                                    </td>
                                    <td ng-hide="event.min_price == null">
                                        <div class="content-block-title">Цена</div>
                                        <span>{{event.price_text}}</span>
                                    </td>
                                </tr>
                                <tr class="event-block-separator">
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="content-block-title">Теги</div>
                                        <div class="tag-name" ng-repeat="tag in event.tags">{{tag.name}}</div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                            <div class="list-block event-menu-items">
                                <ul class="no-border">
                                    <li>
                                        <a href="#" class="item-link item-content" ng-click="event.share();">
                                            <div class="item-media"><i class="ion-ios-upload-outline"></i></div>
                                            <div class="item-inner no-background-image">
                                                <div class="item-title text-bold">Рассказать друзьям</div>
                                                <div class="item-after"></div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="item-link item-content"
                                           ng-click="event.openDetailInfoUrl();">
                                            <div class="item-media"><i class="ion-ios-browsers-outline"></i></div>
                                            <div class="item-inner no-background-image">
                                                <div class="item-title text-bold">Страница события</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="item-link item-content" ng-click="event.openMap();">
                                            <div class="item-media"><i class="ion-ios-navigate-outline"></i></div>
                                            <div class="item-inner no-background-image">
                                                <div class="item-title text-bold">Показать на карте</div>
                                                <div class="item-after"></div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>